---
title: 异步操作
date: 2020-01-12 11:49:16
permalink: /pages/d61b1cb4cdac1f63
categories:
  - 《Bluetooth 范围｜蓝牙®开发实践指北》笔记
tags:
  - JavaScript
author:
  name: Coder Bruce
  link: https://bruceyou.notion.site/Coder-Bruce-5a8c1717a6d048b9bcaadf95281f1159
---

## 蓝牙分包大小

蓝牙分包大小是指在蓝牙通信过程中一次可以发送的数据包大小。由于蓝牙的传输速度有限，因此需要将较大的数据拆分成多个小包进行传输，这就涉及到了蓝牙分包大小的问题。

### iOS中的蓝牙分包大小

在iOS中，BLE（低功耗蓝牙）的蓝牙分包大小默认为20个字节，也就是说，一次最多可以传输20个字节的数据。不过，在实际开发中，可以通过修改Central和Peripheral设备的MTU（最大传输单元）来改变蓝牙分包大小。MTU值越大，一次可以传输的数据量就越多。

iOS中可以通过CBCentralManager和CBPeripheralManager类中的maximumUpdateValueLength属性来获取和设置MTU值。不过需要注意的是，修改MTU值必须在蓝牙连接建立之后才能进行。

### Android中的蓝牙分包大小

在Android中，经典蓝牙的蓝牙分包大小默认为672个字节，而BLE的蓝牙分包大小默认为20个字节，与iOS中的默认值相同。同样地，在Android中也可以通过修改MTU值来改变蓝牙分包大小。

Android中可以通过BluetoothGatt类中的requestMtu()方法来设置MTU值。与iOS不同的是，Android中可以在蓝牙连接建立之前就可以设置MTU值。

## 总结

蓝牙分包大小是蓝牙通信中的一个重要概念，通过合理的设置分包大小可以提高蓝牙通信的效率和稳定性。在iOS和Android中，蓝牙分包大小的默认值都是20个字节，可以通过设置MTU值来改变分包大小。在iOS中必须在蓝牙连接建立之后才能设置MTU值，在Android中则可以在建立连接之前进行设置。
